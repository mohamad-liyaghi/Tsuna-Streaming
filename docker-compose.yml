version: '3.9'

services:

  backend:
    extends:
      file: backend/docker-compose.yml
      service: backend
    depends_on:
      - postgres
      - redis
      - smtp4dev

  postgres:
    extends:
      file: backend/docker-compose.yml
      service: postgres

  test_postgres:
    extends:
      file: backend/docker-compose.yml
      service: test_postgres

  pgadmin:
    extends:
      file: backend/docker-compose.yml
      service: pgadmin
    depends_on:
      - postgres

  redis:
    extends:
      file: backend/docker-compose.yml
      service: redis

  flower:
    extends:
      file: backend/docker-compose.yml
      service: flower
    depends_on:
      - redis
      - celery
      - backend

  smtp4dev:
    extends:
      file: backend/docker-compose.yml
      service: smtp4dev

  celery:
    extends:
      file: backend/docker-compose.yml
      service: celery
    depends_on:
      - redis
      - backend

  celery-beat:
    extends:
      file: backend/docker-compose.yml
      service: celery-beat
    depends_on:
      - redis
      - backend


  # frontend:
  #   extends:
  #     file: frontend/docker-compose.yml
  #     service: frontend

volumes:
  postgres-data: